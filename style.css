/* Definición de variables CSS para colores de materias */
:root {
    --color-lectura: #0284c7;
    --color-matematicas: #dc2626;
    --color-sociales: #ca8a04;
    --color-ciencias: #16a34a;
    --color-ingles: #9333ea;
    --brand-primary: #F97316;
    --brand-secondary: #3B82F6;
    --brand-blue-dark: #1e40af;
    --brand-bg: #f4f4f0;
    --brand-text: #374151;
    --brand-header: #1f2937;
    --brand-surface: #ffffff;
    --brand-border: #e5e7eb;
    --brand-red: #DC2626;
    --brand-green: #16A34A;
}

/* Estilos base y fuentes */
body {
    font-family: 'Inter', sans-serif;
    background-color: var(--brand-bg);
    color: var(--brand-text);
    overflow-x: hidden; /* Evita scroll horizontal */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-size: 15px; /* Ligeramente más grande para legibilidad */
    line-height: 1.6;
}
/* Contenedor principal */
.main-container {
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}
@media (min-width: 640px) {
    .main-container { padding-left: 1.5rem; padding-right: 1.5rem; }
}
@media (min-width: 1024px) {
    .main-container { padding-left: 2rem; padding-right: 2rem; }
}

/* Estilos mejorados para tarjetas */
.card {
    background-color: var(--brand-surface);
    border-radius: 0.75rem; /* Bordes más redondeados */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* Usando box-shadow 'subtle' directamente */
    border: 1px solid var(--brand-border);
    transition: all 0.3s ease;
}
.card:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08); /* 'medium' */
    transform: translateY(-2px);
}

/* Niveles de desempeño */
.level-steps-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
    gap: 0.5rem;
    margin-top: 0.75rem;
    margin-bottom: 1.5rem;
}
.level-step-item {
    border-radius: 0.5rem;
    padding: 0.75rem 0.5rem;
    text-align: center;
    border: 1px solid transparent;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    font-size: 0.8rem;
}
.level-step-item.future { background-color: #f3f4f6; border-color: #e5e7eb; color: #6b7280; }
.level-step-item.passed { background-color: #f9fafb; border-color: #e5e7eb; color: #9ca3af; opacity: 0.8; }
.level-step-item.active {
    color: white;
    font-weight: 700;
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
    transform: scale(1.03);
    z-index: 10;
}
.level-step-item .level-label { display: block; font-weight: 600; font-size: 0.8em; line-height: 1.2; }
.level-step-item .level-range { display: block; font-size: 0.7em; opacity: 0.9; margin-top: 0.1rem;}
.level-step-item.active .level-range { opacity: 1; }


/*
  *** INICIO DE LA CORRECCIÓN PARA MÓVILES ***
  Se eliminan los estilos de 'skills-container' y 'toggle-skills-btn'
  porque fueron reemplazados por <details> y <summary> nativos.
*/

/* Ítem de habilidad individual (se mantiene) */
.skill-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem 0.6rem; /* Más padding vertical */
    border-radius: 0.375rem;
    transition: background-color 0.2s ease;
    font-size: 0.9rem; /* Un poco más grande */
}
.skill-item:hover { background-color: #f3f4f6; }

/* Tarjeta de competencia (AHORA ES UN <details>) */
.competency-card {
    background-color: #f9fafb;
    border: 1px solid #e5e7eb;
    padding: 0; /* Padding se maneja en summary y contenido */
    border-radius: 0.5rem;
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    transition: all 0.3s ease;
    margin-bottom: 0.75rem;
    overflow: hidden; /* Para los bordes redondeados */
}
.competency-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* subtle */
    border-color: rgba(59, 130, 246, 0.2);
}

/* Estilo del <summary> (el botón clickeable) */
.competency-card summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    cursor: pointer;
    list-style: none; /* Oculta la flecha por defecto */
    transition: background-color 0.2s;
}
.competency-card summary:hover {
    background-color: #f3f4f6;
}
.competency-card summary::-webkit-details-marker {
    display: none; /* Oculta flecha en Chrome/Safari */
}

/* Contenido de la competencia (lo que se expande) */
.competency-content {
    padding: 0.5rem 1.25rem 1.25rem 1.25rem;
    border-top: 1px solid #e5e7eb;
    background-color: #ffffff;
}

/* Icono Chevron (flecha) */
.summary-chevron {
    transition: transform 0.3s ease;
    color: #6b7280; /* gris */
    margin-left: 0.5rem;
}
.competency-card[open] > summary .summary-chevron {
    transform: rotate(180deg);
}
/* *** FIN DE LA CORRECCIÓN PARA MÓVILES *** */


/* Contenedor puntaje global */
.global-score-container {
    background: linear-gradient(135deg, var(--brand-primary), #ea580c);
    color: white;
    padding: 1.5rem;
    border-radius: 1rem;
    text-align: center;
    margin-bottom: 2rem;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08); /* 'medium' */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.global-score-container:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); /* 'lifted' */
}

/* Estilos específicos Admin */
#admin-screen .sortable-header { cursor: pointer; user-select: none; position: relative; padding-right: 1.5rem; }
#admin-screen .sort-icon { display: inline-block; width: 1em; height: 1em; margin-left: 0.5rem; opacity: 0.5; transition: opacity 0.2s; position: absolute; right: 0.25rem; top: 50%; transform: translateY(-50%); }
#admin-screen .sortable-header:hover .sort-icon { opacity: 1; }
#admin-table-body tr:hover { background-color: #f0f9ff; }
#admin-table thead th {
    background-color: #ffedd5; /* Naranja más suave */
    color: #9a3412; /* Naranja oscuro */
    white-space: nowrap;
    vertical-align: middle;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
}
/* Padding y fuente mejorados para la tabla */
#admin-table th, #admin-table td {
    padding: 0.75rem 1rem; /* Más padding */
    vertical-align: middle;
    border-bottom: 1px solid var(--brand-border);
    font-size: 0.875rem; /* 14px */
}
#admin-table tbody tr:last-child td { border-bottom: none; }

/* Anchos de columna (ajustados para el nuevo padding) */
#admin-table th:nth-child(1), #admin-table td:nth-child(1) { width: 4%; text-align: center; } /* Rank */
#admin-table th:nth-child(2), #admin-table td:nth-child(2) { width: 18%; min-width: 150px; } /* Nombre */
#admin-table th:nth-child(3), #admin-table td:nth-child(3) { width: 15%; min-width: 140px; } /* Email */
#admin-table th:nth-child(4), #admin-table td:nth-child(4) { width: 5%; text-align: center; } /* Tipo Doc */
#admin-table th:nth-child(5), #admin-table td:nth-child(5) { width: 10%; min-width: 90px; } /* Num Doc */
#admin-table th:nth-child(6), #admin-table td:nth-child(6) { width: 10%; min-width: 90px; } /* Fecha Nac. */
#admin-table th:nth-child(7), #admin-table td:nth-child(7) { width: 6%; text-align: center; } /* Global */
#admin-table th:nth-child(n+8):nth-child(-n+12),
#admin-table td:nth-child(n+8):nth-child(-n+12) { width: 4%; text-align: center; } /* Materias */
#admin-table th:nth-child(13), #admin-table td:nth-child(13) { width: 10%; min-width: 100px; } /* Municipio */
#admin-table th:nth-child(14), #admin-table td:nth-child(14) { width: 5%; text-align: center; } /* Acción */


.view-report-btn { background-color: var(--brand-secondary); color: white; padding: 0.25rem 0.75rem; border-radius: 99px; font-weight: 500; transition: background-color 0.2s; white-space: nowrap; border: none; cursor: pointer; font-size: 0.8rem; }
.view-report-btn:hover { background-color: var(--brand-blue-dark); }

/* Botones de Acción (Logout, Volver, Paginación) */
.action-btn { transition: all 0.3s ease; font-weight: 600; padding: 0.6rem 1.2rem; border-radius: 0.5rem; display: inline-flex; align-items: center; gap: 0.5rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); width: auto; justify-content: center; border: none; cursor: pointer; }
.action-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08); }
.action-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); }

.logout-btn { background-color: #fef2f2; color: var(--brand-red); border: 1px solid #fee2e2; }
.logout-btn:hover:not(:disabled) { background-color: #fee2e2; color: #b91c1c; }
.back-btn { background-color: var(--brand-secondary); color: white; }
.back-btn:hover:not(:disabled) { background-color: var(--brand-blue-dark); }

/* Modal Admin */
#admin-modal-backdrop { position: fixed; inset: 0; background-color: rgba(244, 244, 240, 0.85); display: none; align-items: center; justify-content: center; z-index: 40; backdrop-filter: blur(4px); }
#admin-modal-container { background-color: var(--brand-surface); border-radius: 1rem; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); width: 95%; max-width: 900px; height: 90vh; display: flex; flex-direction: column; border: 1px solid var(--brand-border); transform: scale(0.95) translateY(10px); opacity: 0; transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); }
#admin-modal-backdrop.shown #admin-modal-container { transform: scale(1) translateY(0); opacity: 1; }
#admin-modal-header-container { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid var(--brand-border); }
#admin-modal-header { font-size: 1.25rem; font-weight: 700; color: var(--brand-header); }
#admin-modal-close-btn { background-color: #f3f4f6; color: #6b7280; border: none; border-radius: 99px; width: 2.25rem; height: 2.25rem; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; }
#admin-modal-close-btn:hover { background-color: #e5e7eb; color: #1f2937; transform: rotate(90deg); }
#admin-modal-body { padding: 1rem 1.5rem; overflow-y: auto; flex-grow: 1; background-color: var(--brand-bg); }

/* Estilos Flatpickr */
.flatpickr-calendar { background-color: var(--brand-surface); border-radius: 0.75rem; border: 1px solid var(--brand-border); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08); }
.flatpickr-day.selected { background-color: var(--brand-secondary); border-color: var(--brand-secondary); }
.flatpickr-day:hover { background-color: #eff6ff; }
.flatpickr-day.today { border-color: var(--brand-primary); font-weight: bold; }
.flatpickr-day.today:hover { background-color: #fff7ed; }
.flatpickr-months .flatpickr-month { color: var(--brand-header); fill: var(--brand-header); }
.flatpickr-months .flatpickr-prev-month:hover svg, .flatpickr-months .flatpickr-next-month:hover svg { fill: var(--brand-primary); }
.flatpickr-current-month .numInputWrapper:hover { background: #f3f4f6; }

/* Nueva sección de Feedback Detallado */
.feedback-section { margin-top: 2rem; background-color: var(--brand-surface); border-radius: 0.75rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); border: 1px solid var(--brand-border); overflow: hidden; }
.feedback-header { padding: 1rem 1.5rem; background-color: #f9fafb; border-bottom: 1px solid var(--brand-border); }
.feedback-tabs { display: flex; border-bottom: 1px solid var(--brand-border); background-color: #f9fafb; padding: 0 1.5rem; }
.feedback-tab { padding: 0.75rem 1rem; cursor: pointer; font-weight: 500; color: #6b7280; border-bottom: 3px solid transparent; transition: all 0.2s ease; margin-bottom: -1px; }
.feedback-tab:hover { color: var(--brand-header); }
.feedback-tab.active { color: var(--brand-primary); border-bottom-color: var(--brand-primary); font-weight: 600; }
.feedback-content { display: none; padding: 1.5rem; }
.feedback-content.active { display: block; }
.feedback-subject-group { margin-bottom: 1.5rem; }
.feedback-subject-title { font-size: 1.1rem; font-weight: 600; color: var(--brand-header); margin-bottom: 0.75rem; padding-bottom: 0.25rem; border-bottom: 2px solid var(--brand-border); }

/* Estilos para Tarjetas de Retroalimentación Expandibles (<details>) */
.feedback-card-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}
.feedback-card {
    border: 1px solid var(--brand-border);
    border-radius: 0.5rem;
    background-color: #f9fafb;
    transition: all 0.2s ease;
    overflow: hidden;
}
.feedback-card summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    cursor: pointer;
    list-style: none;
}
.feedback-card summary::-webkit-details-marker { display: none; }
.feedback-card summary:hover { background-color: #f3f4f6; }

.feedback-card-content {
    padding: 1rem 1rem 1rem 1.25rem;
    border-top: 1px solid var(--brand-border);
    font-size: 0.875rem;
    background-color: var(--brand-surface);
}
.feedback-card summary .indicator {
    transition: transform 0.2s;
    color: var(--brand-secondary);
    flex-shrink: 0;
    margin-left: 0.5rem;
}
.feedback-card[open] summary .indicator {
    transform: rotate(90deg);
}
/* Colores de borde izquierdo */
.feedback-card.correct { border-left: 4px solid var(--brand-green); }
.feedback-card.incorrect { border-left: 4px solid var(--brand-red); }

/* Estilos para el contenido de la tarjeta */
.feedback-card-content .label {
    font-weight: 500;
    color: #6b7280;
    min-width: 70px;
    display: inline-block;
}
.feedback-card-content .correct-ans {
    color: var(--brand-green);
    font-weight: 600;
}
.feedback-card-content .incorrect-ans {
    color: var(--brand-red);
    font-weight: 600;
    text-decoration: line-through;
}

/* Tooltip simple */
.tooltip { position: relative; display: inline-block; cursor: help; }
.tooltip .tooltiptext { visibility: hidden; width: max-content; max-width: 250px; background-color: #374151; color: #fff; text-align: center; border-radius: 6px; padding: 5px 10px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -60px; opacity: 0; transition: opacity 0.3s; font-size: 0.75rem; font-weight: 400; white-space: normal; }
.tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
.tooltip .tooltiptext::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #374151 transparent transparent transparent; }


/* ----- INICIO: NUEVOS ESTILOS Videos Colapsables ----- */

.feedback-videos-container {
    background-color: #f9fafb;
    border-radius: 0.5rem;
    border: 1px solid var(--brand-border);
    transition: all 0.2s ease-in-out;
    overflow: hidden;
    margin-bottom: 1.5rem; /* Separación del bloque de Nivel */
}
.feedback-videos-container:hover {
    border-color: #d1d5db;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}
.feedback-videos-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    cursor: pointer;
    list-style: none;
    transition: background-color 0.2s;
}
.feedback-videos-summary:hover {
    background-color: #f3f4f6;
}
.feedback-videos-summary::-webkit-details-marker {
    display: none;
}

.feedback-videos-container[open] > .feedback-videos-summary .summary-chevron {
    transform: rotate(180deg);
}

.feedback-videos-content {
    padding: 1rem 1.25rem;
    border-top: 1px solid var(--brand-border);
    background-color: var(--brand-surface);
}

/* *** INICIO: NUEVOS ESTILOS PARA VISTAS PREVIAS (MINIATURAS) *** */
.video-grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr); /* 1 columna por defecto */
    gap: 1rem;
}

/* En pantallas pequeñas, 2 columnas */
@media (min-width: 640px) {
    .video-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* En pantallas grandes, 3 columnas */
@media (min-width: 1024px) {
    .video-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}


.video-card {
    border: 1px solid var(--brand-border);
    border-radius: 0.5rem;
    overflow: hidden;
    background-color: #f9fafb;
    transition: all 0.2s ease;
}
.video-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transform: translateY(-1px);
}

.video-thumbnail {
    display: block;
    width: 100%;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    background-color: #e5e7eb;
    border-bottom: 1px solid var(--brand-border);
}

.video-info {
    padding: 0.75rem 1rem;
}

.video-info .video-link {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--brand-secondary);
    text-decoration: none;
    line-height: 1.4;
    display: block;
}
.video-info .video-link:hover {
    color: var(--brand-blue-dark);
    text-decoration: underline;
}

.video-info .video-details {
    font-size: 0.75rem;
    color: #6b7280;
    margin-top: 0.25rem;
    display: block;
}
/* *** FIN: NUEVOS ESTILOS PARA VISTAS PREVIAS *** */

